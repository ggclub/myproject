<!DOCTYPE HTML>
{# <p id="logid"><b>log</b></p> #}
<table class="table table-hover">
	<tr>
		<td>No.</td>
		<td style='text-align:left;'>Location</td>
		<td>Switch</td>
		<td>Time</td>
	</tr>
	{% for data in single_data_list %}
	<tr>	
		<td>{{ data.id }}</td>
		<td style='text-align:left;'>{{ data.get_location_display }}</td>
		<td>{{ data.switch }}</td>
		<td>{{ data.date }}</td>
	</tr>
	{% endfor %}
</table>
<div class="text-center">
	<ul class="pagination">
		<li><a href="" aria-label="Previous" class="page_index" id="prev">
			<span aria-hidden="true">&laquo;</span>
		</a></li>
		{% for i in page_no %}
			<li><a href="" class="page_index" id="{{ i }}">{{ i }}</a></li>
		{% endfor %}
		<li><a href="" aria-label="Next" class="page_index" id="next">
			<span aria-hidden="true">&raquo;</span>
		</a></li>
	</ul>
</div>

<script type="text/javascript">
	$('.page_index').on('click', function() {
		var clicked = this.id;
		if(clicked === "prev"){

		}
		else if(clicked === "next"){

		}
		$.ajax({
			url: "/monitor/ajax_page_request/",
			type: "POST",
			// dataType: "json",
			data: {
				'csrfmiddlewaretoken': '{{ csrf_token }}',
				'page_no': {{ page_no }},
				'page_index': clicked,
			},
			success: function(data) {
				$("#right-log").html(data);
			}
		});
		return false;
	});

	var reloadVar;
	var reloadTime = 10000;
	window.onload = $.fn.reloadFunc = function(){
		reloadVar = setTimeout(reload, reloadTime);
	}
	function reload(){
		$.ajax({
			url: "/monitor/ajax_index_reload/",
			type: "POST",
			data : {
				'csrfmiddlewaretoken': '{{ csrf_token }}',
			},
			success: function(data){
				$("#left").html(data);
				$.fn.reloadFunc();
			}
		});
		return false;
	}
</script>

